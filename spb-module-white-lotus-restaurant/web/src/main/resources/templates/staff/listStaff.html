
<!DOCTYPE html>
<html lang="en">

<head>
    <title>White Lotus | Staffs</title>
    <th:block th:replace="layout/head"/>
</head>

<body>
<!-- SIDEBAR -->
<th:block th:replace="layout/sidebar"/>
<!-- SIDEBAR -->
<!------------- Loading spinner---------->
<div class="bg-loading hide">
    <div class="lds-ring">
        <div>

        </div>
    </div>
    <img src="/assets/images/pink-lotus-icon.png" alt="logo" class="sidebar-logo loading-logo">
</div>
<!-----------End Loading spinner-------->

<!------------------------------------------------------------- MODAL DETAIL ---------------------------------------->
<div id="modalDetailStaff" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thông tin nhân viên</h5>
                <i class="fa-solid fa-xmark btn-close" data-bs-dismiss="modal" aria-label="Close"></i>
            </div>
            <div class="modal-body" id="detailModal">

            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" type="button" data-bs-dismiss="modal"><i class="fa-solid fa-square-xmark"></i> Đóng</button>
            </div>
        </div>
    </div>
</div>
<!-------------------------------------------------------- END MODAL DETAIL ----------------------------------------->
<!------------------------------------------------------------- MODAL CREATE ---------------------------------------->
<div id="modalCreateStaff" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
    <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Thông tin nhân viên</h5>
                <i class="fa-solid fa-xmark btn-close" data-bs-dismiss="modal" aria-label="Close"></i>
            </div>
            <div class="modal-body">
                <div class="modal-alert-danger hide"></div>
                <form id="frmCreateStaff" enctype="multipart/form-data">
                    <div class="row">
                        <div class="col-md-8 ">
                            <div class="row">
                                <div class="col-md-6 " >
                                    <label class="control-label" for="fullNameCre">Họ tên</label>
                                    <input type="text" class="form-control" id="fullNameCre" name="fullNameCre">
                                </div>
                                <div class="col-md-6" >
                                    <label class="control-label" for="dobCre">Ngày Sinh</label>
                                    <input type="date" class="form-control" id="dobCre" name="dobCre">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 " >
                                    <label class="control-label" for="phoneCre">Điện Thoại</label>
                                    <input type="text" class="form-control" id="phoneCre" name="phoneCre">
                                </div>
                                <div class="col-md-6" >
                                    <label class="control-label" for="roleCre">Chức vụ</label>
                                    <select class="form-control" id="roleCre" name="roleCre">
                                        <th:block th:each="item: ${roles}">
                                            <option th:text="${item.code}" th:value="${item.id}">

                                            </option>
                                        </th:block>
                                    </select>
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-md-6 " >
                                    <label class="control-label" for="usernameCre">Username</label>
                                    <input type="text" class="form-control" id="usernameCre" name="usernameCre">
                                </div>
                                <div class="col-md-6" >
                                    <label class="control-label" for="passwordCre">Password</label>
                                    <input type="password" class="form-control" id="passwordCre" name="passwordCre">
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6" >
                                    <label class="control-label">Tỉnh/ Thành Phố TW</label>
                                    <select class="form-control" id="provinceCre" name="provinceCre"></select>
                                </div>
                                <div class="col-md-6" >
                                    <label class="control-label">Quận/ Huyện/ Thành Phố</label>
                                    <select class="form-control" id="districtCre" name="districtCre"></select>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-md-6" >
                                    <label class="control-label">Phường/ Thị trấn/ Xã</label>
                                    <select class="form-control" id="wardCre" name="wardCre"></select>
                                </div>
                                <div class="col-md-6" >
                                    <label class="control-label" for="addressCre">Địa chỉ</label>
                                    <input type="text" class="form-control" id="addressCre" name="addressCre">
                                </div>

                            </div>

                        </div>
                        <div class="col-md-4 form-group upload-image">
                            <div>
                                <section>
                                    <div class="wrapper-images">
                                        <div class="image-preview">
                                            <canvas id="canvasCre"></canvas>
                                        </div>
                                        <div class="content" style="opacity: 1;">
                                            <div class="icon">
                                                <i class="ion ion-md-cloud-upload"></i>
                                            </div>
                                            <div class="text">
                                                Chưa có tệp nào được chọn!
                                            </div>
                                            <div class="text">
                                                Dung lượng tối đa = 2MB
                                            </div>
                                        </div>
                                        <div class="clear-image-preview">
                                            <i class="fas fa-times"></i>
                                        </div>
                                        <div class="file-name">
                                            Sửa ảnh
                                        </div>
                                    </div>
                                    <input type="file" id="imageFileCre" accept="image/jpeg, image/png" hidden="">
                                </section>
                            </div>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button id="btnCreateStaff" class="btn btn-save" type="button">
                    <i class="fa-solid fa-square-plus me-2"></i> Thêm
                </button>
                <button class="btn btn-cancel" type="button" data-bs-dismiss="modal"><i class="fa-solid fa-square-xmark"></i> Đóng</button>
            </div>
        </div>
    </div>
</div>
<!-------------------------------------------------------- END MODAL CREATE ----------------------------------------->
<!-- --------------------------------------Modal Update------------------------------------- -->
<div class="cover-modal">
    <div id="modalUpdateStaff" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1">
        <div class="modal-dialog modal-sm modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Thông tin nhân viên</h5>
                    <i class="fa-solid fa-xmark btn-close" data-bs-dismiss="modal" aria-label="Close"></i>
                </div>
                <div class="modal-body">
                    <div class="modal-alert-danger hide"></div>
                    <form id="frmUpdateStaff" enctype="multipart/form-data">
                        <div class="row">
                            <div class="col-md-8 ">
                                <div class="row">
                                    <div class="col-md-6 " >
                                        <label class="control-label">Họ tên</label>
                                        <input type="text" class="form-control" id="fullNameUp" name="fullNameUp">
                                    </div>
                                    <div class="col-md-6" >
                                        <label class="control-label">Ngày Sinh</label>
                                        <input type="date" class="form-control" id="dobUp" name="dobUp">
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-6 " >
                                        <label class="control-label">Điện Thoại</label>
                                        <input type="text" class="form-control" id="phoneUp" name="phoneUp">
                                    </div>
                                    <div class="col-md-6" >
                                        <label class="control-label">Chức vụ</label>
                                        <select class="form-control" id="roleUp" name="roleUp">
                                            <th:block th:each="item: ${roles}">
                                                <option th:text="${item.code}" th:value="${item.id}">

                                                </option>
                                            </th:block>
                                        </select>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6" >
                                        <label class="control-label">Tỉnh/ Thành Phố TW</label>
                                        <select class="form-control" id="provinceUp" name="provinceUp"></select>
                                    </div>
                                    <div class="col-md-6" >
                                        <label class="control-label">Quận/ Huyện/ Thành Phố</label>
                                        <select class="form-control" id="districtUp" name="districtUp"></select>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6" >
                                        <label class="control-label">Phường/ Thị trấn/ Xã</label>
                                        <select class="form-control" id="wardUp" name="wardUp"></select>
                                    </div>
                                    <div class="col-md-6" >
                                        <label class="control-label">Địa chỉ</label>
                                        <input type="text" class="form-control" id="addressUp" name="addressUp">
                                    </div>

                                </div>

                            </div>
                            <div class="col-md-4 form-group upload-image">
                                <div>
                                    <section>
                                        <div class="wrapper-images">
                                            <div class="image-preview">
                                                <canvas id="canvasUp"></canvas>
                                            </div>
                                            <div class="content" style="opacity: 1;">
                                                <div class="icon">
                                                    <i class="ion ion-md-cloud-upload"></i>
                                                </div>
                                                <div class="text">
                                                    Chưa có tệp nào được chọn!
                                                </div>
                                                <div class="text">
                                                    Dung lượng tối đa = 2MB
                                                </div>
                                            </div>
                                            <div class="clear-image-preview">
                                                <i class="fas fa-times"></i>
                                            </div>
                                            <div class="file-name">
                                                Sửa ảnh
                                            </div>
                                        </div>
                                        <input type="file" id="imageFileUp" accept="image/jpeg, image/png" hidden="">
                                    </section>
                                </div>
                            </div>
                        </div>

                    </form>
                </div>
                <div class="modal-footer">
                    <button id="btnUpdateStaff" class="btn btn-save" type="button">
                        <i class="fa-solid fa-square-plus"></i> Cập Nhật</button>
                    <button class="btn btn-cancel" type="button" data-bs-dismiss="modal"><i class="fa-solid fa-square-xmark"></i> Đóng </button>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- ------------------------------------End Modal Update----------------------------------- -->
<!--------------------------------------------------------- CONTENT ------------------------------------------------->
<section id="content">
    <!-- NAVBAR -->
    <th:block th:replace="layout/navbar"/>
    <!-- NAVBAR -->

    <!-- MAIN -->
    <main>
        <!------  Main header ----->
        <div class="app-title">
            <div class="app-title-child">
                <h3>Danh sách nhân viên</h3>
            </div>
            <div id="clock"></div>
        </div>
        <!---- End Main header --->
        <div class="cards">
            <div class="row">
                <div class="col-md-12">
                    <div class="tile">
                        <div class="tile-body">
                            <div class="row element-button">
                                <div class="col-lg-4">
                                    <a id="btnShowCreateModal" class="btn btn-add" title="Thêm">
                                        <i class="fas fa-plus"></i>
                                        Thêm mới nhân viên</a>
                                </div>
                                <div class="col-lg-4"></div>
                                <div class="col-lg-4" >
                                    <form action="#" class="form-group d-flex float-right" onsubmit="return false;" id="searchform">
                                        <div class="mr-2">
                                            <input type="text" id="search" class="form-control search" placeholder="Nhập từ khóa...">
                                        </div>
                                        <div class="mr-2">
                                            <select class="form-control select2-container search" id="filter">
                                                <option value="-1">----All----</option>
                                                <th:block th:each="item: ${roles}">
                                                    <option th:text="${item.code}" th:value="${item.id}">

                                                    </option>
                                                </th:block>
                                            </select>
                                        </div>

                                    </form>

                                </div>
                            </div>

                            <table id="tbStaff" class="table table-hover table-bordered table-striped">
                                <thead>
                                <tr>

                                    <th>Họ Tên</th>
                                    <th>Tài Khoản</th>
                                    <th>Ngày sinh </th>
                                    <th>Điên Thoại</th>
                                    <th>Địa chỉ</th>
                                    <th>Chức vụ</th>
                                    <th>...</th>
                                </tr>
                                </thead>
                                <tbody>

                                </tbody>
                            </table>
                        </div>
                        <div class="row" id="body-foot">
                            <div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-start">
                                <div class="dataTables_info" id="sampleTable_info" role="status" aria-live="polite">
                                    [ 1 -- 10 ] của [ 16 ] sản phẩm
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-7 pagination-foot">
                                <div class="dataTables_paginate paging_simple_numbers" id="sampleTable_paginate">
                                    <ul class="pagination">
                                        <li class="paginate_button page-item previous disabled" id="sampleTable_previous">
                                            <a href="#" aria-controls="sampleTable" data-dt-idx="0" tabindex="0" class="page-link">Lùi</a>
                                        </li>
                                        <li class="paginate_button page-item active">
                                            <a href="#" aria-controls="sampleTable" data-dt-idx="1" tabindex="0" class="page-link">1</a>
                                        </li>
                                        <li class="paginate_button page-item ">
                                            <a href="#" aria-controls="sampleTable" data-dt-idx="2" tabindex="0" class="page-link">2</a>
                                        </li>
                                        <li class="paginate_button page-item next" id="sampleTable_next">
                                            <a href="#" aria-controls="sampleTable" data-dt-idx="3" tabindex="0" class="page-link">Tiếp</a>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- MAIN -->
</section>

<!------------------------------------------------------- END CONTENT ----------------------------------------------->


<!---- JAVA SCRIPT ---->
<th:block th:replace="layout/javascript"/>

<script>
    const page = {
        urls: {
            getAllStaff: AppBase.API_STAFF + '/get-all',
            getById: AppBase.API_STAFF + '/',
            getAllProvinces: AppBase.API_PROVINCE ,
            getAllDistricts: AppBase.API_DISTRICT ,
            getAllWards: AppBase.API_WARD,

            createStaff: AppBase.API_STAFF ,
            updateStaff:AppBase.API_STAFF + '/',
            deleteStaff: AppBase.API_STAFF + '/delete',
        },
        elements: {},
        loadData: {},
        commands: {},
        dialogs: {
            elements: {},
            loadData: {},
            commands: {},
        }
    }
    let staff = new Staff();
    let currentKeyWord ;
    let roleIdFilter;
    let currentStaffId;
    let currentPageNumber = 0;
    let role = `[[${ROLE}]]`;

    page.dialogs.elements.searchform = $('#searchform');
    page.dialogs.elements.modalDetailStaff = $('#modalDetailStaff');



    page.elements.btnShowCreateModal = $('#btnShowCreateModal');
    page.dialogs.elements.btnCreateStaff = $('#btnCreateStaff');
    page.dialogs.elements.modalCreateStaff = $('#modalCreateStaff');
    page.dialogs.elements.formCreateStaff = $('#frmCreateStaff');
    page.dialogs.elements.provinceCre = $('#provinceCre');
    page.dialogs.elements.districtCre = $('#districtCre');
    page.dialogs.elements.wardCre = $('#wardCre');
    page.dialogs.elements.fullNameCre = $('#fullNameCre');
    page.dialogs.elements.dobCre = $('#dobCre');
    page.dialogs.elements.roleCre = $('#roleCre');
    page.dialogs.elements.phoneCre = $('#phoneCre');
    page.dialogs.elements.usernameCre = $('#usernameCre');
    page.dialogs.elements.passwordCre = $('#passwordCre');
    page.dialogs.elements.addressCre = $('#addressCre');

    page.dialogs.elements.wrapper = $("section .wrapper-images");
    page.dialogs.elements.wrapperContent = $("section .wrapper-images .content");
    page.dialogs.elements.imagePreview = $("section .image-preview");
    page.dialogs.elements.btnClearImagePreview = $(".clear-image-preview i");

    page.dialogs.elements.imageFileCre = $("#imageFileCre");
    page.dialogs.elements.imagePreviewCanvas = $("section .image-preview canvas");
    page.dialogs.elements.canvas = $("#canvasCre");
    page.dialogs.elements.context = page.dialogs.elements.canvas[0].getContext('2d');
    page.dialogs.elements.imagePreviewCanvas.css("display", "none");
    page.dialogs.elements.divImagePreview = $("#modalCreateStaff div.image-preview");
    page.dialogs.elements.divFileName = $("#modalCreateStaff div.file-name");


    page.dialogs.elements.formUpdateStaff = $('#frmUpdateStaff');
    page.dialogs.elements.btnUpdateStaff = $('#btnUpdateStaff');
    page.dialogs.elements.modalUpdateStaff = $('#modalUpdateStaff');
    page.dialogs.elements.provinceUp = $('#provinceUp');
    page.dialogs.elements.districtUp = $('#districtUp');
    page.dialogs.elements.wardUp = $('#wardUp')
    page.dialogs.elements.fullNameUp = $('#fullNameUp');
    page.dialogs.elements.dobUp = $('#dobUp');
    page.dialogs.elements.roleUp = $('#roleUp');
    page.dialogs.elements.phoneUp = $('#phoneUp');
    page.dialogs.elements.addressUp = $('#addressUp');


    page.dialogs.elements.imageFileUp = $("#imageFileUp");
    page.dialogs.elements.imagePreviewCanvasUp = $("section .image-preview #canvasUp");
    page.dialogs.elements.canvasUp = $("#canvasUp");
    page.dialogs.elements.contextUp = page.dialogs.elements.canvasUp[0].getContext('2d');
    page.dialogs.elements.imagePreviewCanvasUp.css("display", "none");
    page.dialogs.elements.divImagePreviewUp = $("#modalUpdateProduct div.image-preview");
    page.dialogs.elements.divFileNameUp = $("#modalUpdateProduct div.file-name")

    page.elements.loader = $(".bg-loading");

    // ------------------------------------------------METHOD--------------------------------------------------------
    page.dialogs.commands.getAllStaffs = () => {
        page.commands.showLoading();

        let obj = {
            currentPageNumber: currentPageNumber,
            keyWord: currentKeyWord,
            roleIdFilter: roleIdFilter
        }

        $.ajax({
            type: 'POST',
            headers: {
                'accept': 'application/json',
                'content-type': 'application/json'
            },
            // contentType: false,
            // cache: false,
            // processData: false,
            url: page.urls.getAllStaff,
            data: JSON.stringify(obj),
        })
            .done((data) => {
                if (data == undefined){
                    page.commands.closeLoading();
                    toastFail("Không có dử liệu phù hợp");

                }
                $('#tbStaff tbody').empty();

                listStaffs = data.content;

                currentPageNumber = data.pageable.pageNumber;

                totalPages = data.totalPages;

                totalElements = data.totalElements;

                $.each(listStaffs, (i, item) => {
                    staff = item;
                    let str = page.commands.renderStaff(staff);
                    $('#tbStaff tbody').append(str);

                })
                let strPage = page.commands.renderPagination(currentPageNumber, totalElements, totalPages );
                $('#body-foot').empty().append(strPage);
                page.commands.addEventClick();
                page.dialogs.commands.authorization();
            })
            .fail(() => {
                toastFail("Result Fail");
            })
            .always(function () {
                page.commands.closeLoading();
            })

    }

    page.dialogs.elements.searchform.on('change' ,'.search', () => {
        currentPageNumber = 0;
        currentKeyWord = $('#search').val();
        roleIdFilter = +$('#filter').val();
        page.dialogs.commands.getAllStaffs();
    })

    page.dialogs.commands.doCreate = () => {

        page.commands.showLoading();
        let fullName = page.dialogs.elements.fullNameCre.val().trim();
        let dob = page.dialogs.elements.dobCre.val().trim();
        let phone = page.dialogs.elements.phoneCre.val().trim();
        let provinceId = +page.dialogs.elements.provinceCre.val();
        let provinceName = page.dialogs.elements.provinceCre.find("option:selected").text();
        let districtId = +page.dialogs.elements.districtCre.val();
        let districtName = page.dialogs.elements.districtCre.find("option:selected").text();
        let wardId = +page.dialogs.elements.wardCre.val();
        let wardName = page.dialogs.elements.wardCre.find("option:selected").text();
        let address = page.dialogs.elements.addressCre.val().trim();
        let username = page.dialogs.elements.usernameCre.val().trim();
        let password = page.dialogs.elements.passwordCre.val().trim();
        let roleId = +page.dialogs.elements.roleCre.val().trim();
        let file = page.dialogs.elements.imageFileCre[0].files[0];
        if(file == undefined){
            file = null
        }

        let formData = new FormData();
        formData.append("fullName", fullName);
        formData.append("dob", dob);
        formData.append("phone", phone);
        formData.append("provinceId", provinceId);
        formData.append("provinceName", provinceName);
        formData.append("districtId", districtId);
        formData.append("districtName", districtName);
        formData.append("wardId", wardId);
        formData.append("wardName", wardName);
        formData.append("address", address);
        formData.append("username", username);
        formData.append("password", password);
        formData.append("roleId", roleId);
        formData.append("file", file);

        $.ajax({
            type: "POST",
            contentType: false,
            cache: false,
            processData: false,
            url: page.urls.createStaff,
            data: formData
        })
            .done((data) => {
                console.log(data)
                let staff = data;
                page.dialogs.elements.formCreateStaff[0].reset();

                page.dialogs.commands.clearImagePreview();

                page.dialogs.commands.getAllStaffs();

                page.dialogs.elements.modalCreateStaff.modal('hide');

                toastSuccess("Thêm mới nhân viên <b>" + staff.fullName+ "</b> thành công.");

            })
            .fail((jqXHR) => {

                let str = '';

                if (jqXHR.status === 401) {
                    AppBase.SweetAlert.showError401();
                } else {
                    if (jqXHR.status === 403) {
                        AppBase.SweetAlert.showError403();
                    } else {
                        if (jqXHR.responseJSON) {
                            if (jqXHR.responseJSON.message) {
                                str += `<label id="message-error" class="error" for="message">${jqXHR.responseJSON.message}</label>`;
                            } else {
                                $.each(jqXHR.responseJSON, function (key, value) {
                                    str += `<label id="${key}-error" class="error" for="${key}">${value}</label>`;
                                    $("#" + key).addClass("error");
                                });
                            }
                            page.dialogs.elements.formCreateStaff.removeClass("hide").addClass("show");
                            page.dialogs.elements.formCreateStaff.css("display", "block")
                            page.dialogs.elements.formCreateStaff.append(str);
                        } else {
                            AppBase.SweetAlert.showError500();
                        }
                    }
                }
            }).always(function () {
            page.commands.closeLoading();
        })
    }

    page.dialogs.elements.formCreateStaff.validate({
        rules: {
            fullNameCre: {
                required: true,
                minlength: 3,
                maxlength: 30
            },
            dobCre: {
                required: true,
            },
            phoneCre: {
                minlength: 10,
                required: true,
            },
            provinceCre: {
                required: true,
                min: 1,
                max: 100000,
                number: true
            },
            districtCre: {
                required: true,
                min: 1,
                max: 100000,
                number: true
            },
            wardCre: {
                required: true,
                min: 1,
                max: 100000,
                number: true
            },
            roleCre: {
                required: true,
                min: 1,
                max: 6,
                number: true
            },
            addressCre: {
                required: true,
                minlength: 5,
                maxlength: 50
            },
            usernameCre: {
                required: true,
                minlength: 10,
                maxlength: 50,
                email: true
            },
            passwordCre: {
                required: true,
            },
        },
        messages: {
            fullNameCre: {
                required: "Vui lòng nhập tên nhân viên.",
                minlength: "Tên sản phẩm có độ dài tối thiểu là 3 ký tự.",
                maxlength: "Tên sản phẩm có độ dài tối đa là 30 ký tự."
            },
            provinceCre: {
                required: "Vui lòng chọn địa chỉ",
                min: "địa chỉ không đúng. vui lòng nhập lại.",
                max: "địa chỉ không đúng. vui lòng nhập lại.",
                number: "địa chỉ không đúng. vui lòng nhập lại."
            },
            districtCre: {
                required: "Vui lòng chọn địa chỉ",
                min: "địa chỉ không đúng. vui lòng nhập lại.",
                max: "địa chỉ không đúng. vui lòng nhập lại.",
                number: "địa chỉ không đúng. vui lòng nhập lại."
            },
            wardCre: {
                required: "Vui lòng chọn địa chỉ",
                min: "địa chỉ không đúng. vui lòng nhập lại.",
                max: "địa chỉ không đúng. vui lòng nhập lại.",
                number: "địa chỉ không đúng. vui lòng nhập lại."
            },
            roleCre: {
                required: "Vui lòng chọn chức vụ",
                min: "chức vụ không đúng. vui lòng nhập lại.",
                max: "chức vụ không đúng. vui lòng nhập lại.",
                number: "chức vụ không đúng. vui lòng nhập lại."
            },
            addressCre: {
                required: "Vui lòng nhập địa chỉ.",
                minlength: "Địa chỉ có độ dài tối thiểu là ${0} ký tự.",
                maxlength: "Địa chỉ có độ dài tối đa là ${0} ký tự."
            },
            phoneCre: {
                minlength: "Số điện thoại có độ dài tối thiểu là ${0} ký tự.",
                required: "Vui lòng nhập số điện thoại."
            },
            usernameCre: {
                required: "Vui lòng nhập email.",
                minlength: "Email có độ dài tối thiểu là ${0} ký tự.",
                maxlength: "Email có độ dài tối đa là ${0} ký tự.",
                email: "Định dạng email không đúng."
            },
            dobCre: {
                required: "Vui lòng chọn ngày tháng",

            },
            passwordCre: {
                required: "Vui lòng nhập mật khẩu."
            },
        },
        submitHandler: function () {
            page.dialogs.commands.doCreate();
        }
    })

    page.dialogs.elements.btnCreateStaff.on('click' , () => {
        page.dialogs.elements.formCreateStaff.trigger('submit');
    })

    page.loadData.findStaffById = (id) => {
        return $.ajax({
            type: 'GET',
            url: page.urls.getById +   id
        })
            .done((data) => {

            })
            .fail(() => {
                ;
            })
    }
    page.commands.addEventEditClick = () => {

        $('#tbStaff').on('click','.edit', function () {

            page.dialogs.elements.formUpdateStaff[0].reset();

            let staffId = $(this).data('id');


            page.loadData.findStaffById(staffId).then((data) => {

                staff = data;
                currentStaffId = staffId;
                console.log(staff.dob)

                page.dialogs.elements.provinceUp.val(staff.locationRegion.provinceId);
                page.loadData.getAllDistrictsByProvinceId(staff.locationRegion.provinceId, page.dialogs.elements.districtUp).then(() => {
                    page.dialogs.elements.districtUp.val(staff.locationRegion.districtId);

                    page.loadData.getAllWardsByDistrictId(staff.locationRegion.districtId, page.dialogs.elements.wardUp).then(() => {
                        page.dialogs.elements.wardUp.val(staff.locationRegion.wardId);
                    });
                });

                page.dialogs.elements.fullNameUp.val(staff.fullName);
                page.dialogs.elements.dobUp.val(staff.dob);
                page.dialogs.elements.roleUp.val(staff.role.id);
                page.dialogs.elements.phoneUp.val(staff.phone);
                page.dialogs.elements.addressUp.val(staff.locationRegion.address);

                page.dialogs.commands.loadImageToCanvas(null, "URL", staff.fileUrl);

                page.dialogs.elements.modalUpdateStaff.modal('show');


            })
                .catch(() => {
                    toastError("ID nhân viên không tồn tại");
                });
        })
    }
    page.dialogs.commands.doUpdate = () => {

        page.commands.showLoading();
        let fullName = page.dialogs.elements.fullNameUp.val().trim();
        let dob = page.dialogs.elements.dobUp.val().trim();
        let phone = page.dialogs.elements.phoneUp.val().trim();
        let provinceId = +page.dialogs.elements.provinceUp.val();
        let provinceName = page.dialogs.elements.provinceUp.find("option:selected").text();
        let districtId = +page.dialogs.elements.districtUp.val();
        let districtName = page.dialogs.elements.districtUp.find("option:selected").text();
        let wardId = +page.dialogs.elements.wardUp.val();
        let wardName = page.dialogs.elements.wardUp.find("option:selected").text();
        let address = page.dialogs.elements.addressUp.val().trim();
        let roleId = +page.dialogs.elements.roleUp.val().trim();
        let file = page.dialogs.elements.imageFileCre[0].files[0];

        if(file == undefined){
            file = null
        }

        let formData = new FormData();
        formData.append("fullName", fullName);
        formData.append("dob", dob);
        formData.append("phone", phone);
        formData.append("provinceId", provinceId);
        formData.append("provinceName", provinceName);
        formData.append("districtId", districtId);
        formData.append("districtName", districtName);
        formData.append("wardId", wardId);
        formData.append("wardName", wardName);
        formData.append("address", address);
        formData.append("roleId", roleId);
        formData.append("file", file);

        $.ajax({
            type: "PATCH",
            contentType: false,
            cache: false,
            processData: false,
            url: page.urls.updateStaff + currentStaffId,
            data: formData
        })
            .done((data) => {
                console.log(data)
                let staff = data;
                page.dialogs.elements.formUpdateStaff[0].reset();

                page.dialogs.commands.clearImagePreview();

                page.dialogs.commands.getAllStaffs();

                page.dialogs.elements.modalUpdateStaff.modal('hide');

                toastSuccess("Chỉnh sửa thông tin nhân viên: <b>" + staff.fullName+ "</b> thành công.");

            })
            .fail((jqXHR) => {

                let str = '';

                if (jqXHR.status === 401) {
                    AppBase.SweetAlert.showError401();
                } else {
                    if (jqXHR.status === 403) {
                        AppBase.SweetAlert.showError403();
                    } else {
                        if (jqXHR.responseJSON) {
                            if (jqXHR.responseJSON.message) {
                                str += `<label id="message-error" class="error" for="message">${jqXHR.responseJSON.message}</label>`;
                            } else {
                                $.each(jqXHR.responseJSON, function (key, value) {
                                    str += `<label id="${key}-error" class="error" for="${key}">${value}</label>`;
                                    $("#" + key).addClass("error");
                                });
                            }
                            page.dialogs.elements.formUpdateStaff.removeClass("hide").addClass("show");
                            page.dialogs.elements.formUpdateStaff.css("display", "block")
                            page.dialogs.elements.formUpdateStaff.append(str);
                        } else {
                            AppBase.SweetAlert.showError500();
                        }
                    }
                }
            }).always(function () {
            page.commands.closeLoading();
        })
    }
    page.dialogs.elements.formUpdateStaff.validate({
        rules: {
            fullNameUp: {
                required: true,
                minlength: 3,
                maxlength: 30
            },
            dobUp: {
                required: true,
            },
            phoneUp: {
                minlength: 10,
                required: true,
            },
            provinceUp: {
                required: true,
                min: 1,
                max: 100000,
                number: true
            },
            districtUp: {
                required: true,
                min: 1,
                max: 100000,
                number: true
            },
            wardUp: {
                required: true,
                min: 1,
                max: 100000,
                number: true
            },
            roleUp: {
                required: true,
                min: 1,
                max: 6,
                number: true
            },
            addressUp: {
                required: true,
                minlength: 5,
                maxlength: 50
            }
        },
        messages: {
            fullNameUp: {
                required: "Vui lòng nhập tên nhân viên.",
                minlength: "Tên sản phẩm có độ dài tối thiểu là 3 ký tự.",
                maxlength: "Tên sản phẩm có độ dài tối đa là 30 ký tự."
            },
            provinceUp: {
                required: "Vui lòng chọn địa chỉ",
                min: "địa chỉ không đúng. vui lòng nhập lại.",
                max: "địa chỉ không đúng. vui lòng nhập lại.",
                number: "địa chỉ không đúng. vui lòng nhập lại."
            },
            districtUp: {
                required: "Vui lòng chọn địa chỉ",
                min: "địa chỉ không đúng. vui lòng nhập lại.",
                max: "địa chỉ không đúng. vui lòng nhập lại.",
                number: "địa chỉ không đúng. vui lòng nhập lại."
            },
            wardUp: {
                required: "Vui lòng chọn địa chỉ",
                min: "địa chỉ không đúng. vui lòng nhập lại.",
                max: "địa chỉ không đúng. vui lòng nhập lại.",
                number: "địa chỉ không đúng. vui lòng nhập lại."
            },
            roleUp: {
                required: "Vui lòng chọn chức vụ",
                min: "chức vụ không đúng. vui lòng nhập lại.",
                max: "chức vụ không đúng. vui lòng nhập lại.",
                number: "chức vụ không đúng. vui lòng nhập lại."
            },
            addressUp: {
                required: "Vui lòng nhập địa chỉ.",
                minlength: "Địa chỉ có độ dài tối thiểu là ${0} ký tự.",
                maxlength: "Địa chỉ có độ dài tối đa là ${0} ký tự."
            },
            phoneUp: {
                minlength: "Số điện thoại có độ dài tối thiểu là ${0} ký tự.",
                required: "Vui lòng nhập số điện thoại."
            },
            dobUp: {
                required: "Vui lòng nhập ngày sinh.",

            }
        },
        submitHandler: function () {
            page.dialogs.commands.doUpdate();
        }
    })

    page.dialogs.elements.btnUpdateStaff.on('click' , () => {
        page.dialogs.elements.formUpdateStaff.trigger('submit');
    })


    page.commands.renderPagination = (currentPageNumber, totalElements, totalPages) => {
        let str = `
                            <div class="col-sm-12 col-md-5 d-flex align-items-center justify-content-start">
                                <div class="dataTables_info" id="sampleTable_info" role="status" aria-live="polite">
                                    [ 1 -- 5 ] của [ ${totalElements} ] sản phẩm
                                </div>
                            </div>
                            <div class="col-sm-12 col-md-7 pagination-foot">
                                <div class="dataTables_paginate paging_simple_numbers" id="sampleTable_paginate">
                                    <ul class="pagination">
                `;


        if (currentPageNumber != 0) {
            str += `
                            <li class="paginate_button page-item previous " id="sampleTable_previous" data-page="${currentPageNumber-1}">
                                <a class="page-link" data-page="${currentPageNumber-1}">Lùi</a>
                            </li>
                            `;
        } else {
            str += `
                            <li class="paginate_button page-item previous disabled" id="sampleTable_previous">
                                <a class="page-link">Lùi</a>
                            </li>
                            `;
        }

        for(let i = 1; i <= totalPages ; i++ ) {
            if ((i - 1 ) === currentPageNumber) {
                str += `
                            <li class="paginate_button page-item active">
                                <a id="pageActive" class="page-link" data-page="${i-1}">${i}</a>
                            </li>
                        `;
            }
            else {
                str += `
                            <li class="paginate_button page-item">
                                <a id="pageActive" class="page-link" data-page="${i-1}">${i}</a>
                            </li>
                        `;
            }
        }

        if(currentPageNumber != (totalPages - 1)){
            str += `
                            <li class="paginate_button page-item next" id="sampleTable_next" >
                                <a class="page-link" data-page="${currentPageNumber+1}">Tiếp</a>
                            </li>
                        `;
        } else {
            str += `
                            <li class="paginate_button page-item next disabled" id="sampleTable_next">
                                <a class="page-link">Tiếp</a>
                            </li>
                        `;
        }

        return str;
    }


    page.commands.addEventChangePage = () => {
        $('.page-link').on('click', function () {

            let pageNumber = $(this).data('page');

            currentPageNumber = pageNumber;

            currentKeyWord = $('#search').val();

            roleIdFilter = +$('#filter').val();

            page.dialogs.commands.getAllStaffs();
        })
    }

    page.commands.addEventDeleteClick = () => {

        $('#tbStaff').on('click','.delete', function () {

            Swal.fire({
                title: 'Bạn có chắc chắn?',
                text: "Khóa nhân viên!",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Khóa'
            }).then((result) => {
                if (result.isConfirmed) {

                    let staffId = $(this).data('id');
                    console.log('productId : ' + staffId)

                    page.loadData.findStaffById(staffId).then((data) => {
                        $.ajax({
                            headers: {
                                'accept': 'application/json',
                                'content-type': 'application/json'
                            },
                            type: 'DELETE',
                            url: page.urls.deleteStaff + '/' + staffId,
                        })
                            .done((data) => {

                                $('#tr_' + staffId).remove();

                                currentPageNumber = $('#pageActive').data('page');

                                page.dialogs.commands.getAllStaffs();

                                page.commands.addEventClick();

                                Swal.fire({
                                    position: 'middle-end',
                                    icon: 'success',
                                    title: 'Khóa thành công',
                                    showConfirmButton: false,
                                    timer: 2000
                                })
                            })
                            .fail((jqXHR) => {
                                if (jqXHR.status === 401) {
                                    AppBase.SweetAlert.showError401();
                                } else if(jqXHR.status === 403) {
                                    Swal.fire({
                                        position: 'center',
                                        icon: 'error',
                                        title: '403 - bạn không có quyền hạn',
                                        showConfirmButton: false
                                    })
                                } else {
                                    Swal.fire({
                                        position: 'center',
                                        icon: 'error',
                                        title: 'Vui lòng liên hệ Admin',
                                        showConfirmButton: false
                                    })
                                }
                            })
                    })
                }
            })
                .catch(() => {
                    toastError("Nhân viên không tồn tại");
                });


        })
    }
    page.commands.addEventDetailClick = () =>{
        $('#tbStaff').on('click','.view', function () {
            let staffId = $(this).data('id');

            page.loadData.findStaffById(staffId).then((data) => {
                staff = data;
                let str =  page.commands.renderStaffInfo(staff);
                $('#modalDetailStaff #detailModal').empty();
                $('#modalDetailStaff #detailModal').prepend(str);
                page.dialogs.elements.modalDetailStaff.modal('show');
            })
                .catch((error) => {
                    alert("Không tồn tại nhân viên này");
                });
        })
    }


    page.commands.addEventClick = () => {
        page.commands.addEventEditClick();
        page.commands.addEventChangePage();
        page.commands.addEventDeleteClick();
        page.commands.addEventDetailClick();

    }
    page.commands.renderStaff = (staff) => {
        return `
                    <tr id="tr_${staff.id}" class="hover" style="font-weight: 600;">

                                    <td>${staff.fullName}</td>
                                    <td>${staff.username}</td>
                                    <td>${formDate(staff.dob)}</td>
                                    <td>${staff.phone}</td>
                                    <td>${staff.locationRegion.address}</td>
                                    <td><span class="badge bg-success">${staff.role.code}</span></td>

                                    <td class="align-items-center">
                                        <div class="iq-card-header-toolbar d-flex align-items-center justify-content-center">
                                            <div class="dropdown">
                                                 <span class="dropdown-toggle text-primary" id="dropdownMenuButton5" data-toggle="dropdown" >
                                                    <i class="fa-solid fa-ellipsis-vertical"></i>
                                                 </span>
                                                 <div class="dropdown-menu" aria-labelledby="dropdownMenuButton5">
                                                     <button data-id="${staff.id}" class="btn btn-primary dropdown-item delete" type="button" title="Xóa">
                                                        <i class="fas fa-trash-alt"></i>
                                                     </button>
                                                     <button data-id="${staff.id}" class="btn btn-primary dropdown-item view" type="button" title="Chit tiết">
                                                        <i class="fa-regular fa-id-card"></i>
                                                     </button>
                                                     <button data-id="${staff.id}" class="btn btn-primary dropdown-item edit" type="button" title="Sửa" data-toggle="modal" data-target="#ModalUP">
                                                        <i class="fas fa-edit"></i>
                                                     </button>
                                                </div>
                                            </div>
                                        </div>
                                    </td>
                    </tr>
                `;
    }
    page.commands.renderStaffInfo = (staff) => {
        return`

                <div class="container">
                    <div class="main-body">

                        <!-- Breadcrumb -->
                        <nav aria-label="breadcrumb" class="main-breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="javascript:void(0)">Nhân viên</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Hồ sơ nhân viên</li>
                            </ol>
                        </nav>
                        <!-- /Breadcrumb -->

                        <div class="row gutters-sm">
                            <div class="col-md-4 mb-3">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="d-flex flex-column align-items-center text-center">
                                            <img src=${staff.fileUrl} alt="Admin" class="rounded-circle" width="150">
                                            <div class="mt-3">
                                                <h4>${staff.fullName}</h4>
                                                <p class="text-secondary mb-1">${staff.role.code}</p>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="card mb-3">
                                    <div class="card-body">
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Họ tên</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${staff.fullName}
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Email</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${staff.username}
                                            </div>
                                        </div>
                                        <hr>
                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">SĐT</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                ${staff.phone}
                                            </div>
                                        </div>
                                        <hr>

                                        <div class="row">
                                            <div class="col-sm-3">
                                                <h6 class="mb-0">Địa chỉ</h6>
                                            </div>
                                            <div class="col-sm-9 text-secondary">
                                                <p class="text-muted font-size-sm">${staff.locationRegion.address} - ${staff.locationRegion.wardName} - ${staff.locationRegion.districtName} - ${staff.locationRegion.provinceName}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>` ;
    }

    page.loadData.getAllProvinces = () => {
        return $.ajax({
            type: 'GET',
            url: page.urls.getAllProvinces
        })
            .done((data) => {
                let provinces = data.results;

                $.each(provinces, (i, item) => {
                    let str = `<option value="${item.province_id}">${item.province_name}</option>`;

                    page.dialogs.elements.provinceCre.append(str);
                    page.dialogs.elements.provinceUp.append(str);
                })
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    page.loadData.getAllDistrictsByProvinceId = (provinceId, elem) => {
        return $.ajax({
            type: 'GET',
            url: page.urls.getAllDistricts  + provinceId
        })
            .done((data) => {
                elem.empty();

                let districts = data.results;

                $.each(districts, (i, item) => {
                    let str = `<option value="${item.district_id}">${item.district_name}</option>`;

                    elem.append(str);
                })
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    page.loadData.getAllWardsByDistrictId = (districtId, elem) => {
        return $.ajax({
            type: 'GET',
            url: page.urls.getAllWards + districtId
        })
            .done((data) => {
                elem.empty();
                let wards = data.results;

                $.each(wards, (i, item) => {
                    let str = `<option value="${item.ward_id}">${item.ward_name}</option>`;

                    elem.append(str);
                })
            })
            .fail((jqXHR) => {
                console.log(jqXHR)
            })
    }

    page.commands.handleChangeProvince = (elemProvince, elemDistrict, elemWard) => {
        elemProvince.on('change', function () {
            let provinceId = $(this).val();

            page.loadData.getAllDistrictsByProvinceId(provinceId, elemDistrict).then(() => {
                let districtId = elemDistrict.val();

                page.loadData.getAllWardsByDistrictId(districtId, elemWard);
            });
        })
    }

    page.commands.handleChangeDistrict = (elemDistrict, elemWard) => {
        elemDistrict.on('change', function () {
            let districtId = $(this).val();

            page.loadData.getAllWardsByDistrictId(districtId, elemWard);
        })
    }

    page.commands.closeLoading = () => {
        $('.fa-square-plus').removeClass('hide')
        $('.lds-ring-btn').addClass("hide");
        $('.lds-ring').addClass("hide");
        page.elements.loader.addClass("hide");
        page.dialogs.elements.btnCreateStaff.prop('disabled', false);
        // page.dialogs.elements.btnUpdate.prop('disabled', false);
    }

    page.commands.showLoading = () => {
        $('.fa-square-plus').addClass('hide')
        $('.lds-ring-btn').removeClass("hide");
        $('.lds-ring').removeClass("hide");
        page.elements.loader.removeClass("hide");
        page.dialogs.elements.btnCreateStaff.prop('disabled', true);
        // page.dialogs.elements.btnUpdate.prop('disabled', true);
    }

    page.dialogs.commands.loadImageToCanvas = (imageFile, fileType, imageUrl) => {
        page.dialogs.elements.imagePreviewCanvas.css("display", "");
        page.dialogs.elements.wrapper.addClass("active");
        page.dialogs.elements.wrapperContent.css("opacity", 0);

        page.dialogs.elements.imagePreviewCanvasUp.css("display", "");
        page.dialogs.elements.wrapper.addClass("active");
        page.dialogs.elements.wrapperContent.css("opacity", 0);

        let imageObj = new Image();

        imageObj.onload = function () {
            page.dialogs.elements.context.canvas.width = imageObj.width;
            page.dialogs.elements.context.canvas.height = imageObj.height;
            page.dialogs.elements.context.drawImage(imageObj, 0, 0, imageObj.width, imageObj.height);

            page.dialogs.elements.contextUp.canvas.width = 445;
            page.dialogs.elements.contextUp.canvas.height = 345;
            page.dialogs.elements.contextUp.drawImage(imageObj, 0, 0, 445, 345);
        };

        if (fileType === "BINARY") {
            imageObj.src = URL.createObjectURL(imageFile);
        } else {
            imageObj.src = imageUrl;
        }
    }

    page.dialogs.commands.changeImagePreview = (elem) => {
        let imageFile = elem[0].files[0];

        if (imageFile) {
            let reader = new FileReader();

            reader.readAsDataURL(imageFile);

            reader.onload = function (e) {
                if (e.target.readyState === FileReader.DONE) {
                    page.dialogs.commands.loadImageToCanvas(imageFile, "BINARY", null);
                }
            }
        } else {
            page.dialogs.commands.clearImagePreview();
        }
    }

    page.dialogs.commands.authorization = () =>{
        if(!(role === "ADMIN")){
            $(".delete").addClass("d-none");
            $(".edit").addClass("d-none");
            page.elements.btnShowCreateModal.addClass("d-none");
        }
    }

    page.dialogs.commands.clearImagePreview = () => {
        page.dialogs.elements.imageFileCre.val("");
        page.dialogs.elements.imageFileUp.val("");
        page.dialogs.elements.imagePreviewCanvas.css("display", "none");
        page.dialogs.elements.wrapper.removeClass("active");
        page.dialogs.elements.wrapperContent.css("opacity", 1);
    }

    function formDate(date) {
        let arr = date.split("-")
        date = arr[2] + "-" + arr[1] + "-" + arr[0]
        return date;
    }

    page.initializeControlEvent = () => {

        page.dialogs.elements.divImagePreview.on('click', () => {
            page.dialogs.elements.imageFileCre.trigger('click');
        })
        page.dialogs.elements.divFileName.on('click', () => {
            page.dialogs.elements.imageFileCre.trigger('click');
        })

        page.dialogs.elements.divImagePreviewUp.on('click', () => {
            page.dialogs.elements.imageFileUp.trigger('click');
        })
        page.dialogs.elements.divFileNameUp.on('click', () => {
            page.dialogs.elements.imageFileUp.trigger('click');
        })

        page.dialogs.elements.imageFileCre.on("change", function () {
            page.dialogs.commands.changeImagePreview(page.dialogs.elements.imageFileCre);
        });

        page.dialogs.elements.imageFileUp.on("change", function () {
            page.dialogs.commands.changeImagePreview(page.dialogs.elements.imageFileUp);
        });

        page.dialogs.elements.btnClearImagePreview.on('click', () => {
            page.dialogs.commands.clearImagePreview();
        })

        page.elements.btnShowCreateModal.on('click', () => {
            page.dialogs.elements.formCreateStaff[0].reset();
            page.dialogs.commands.clearImagePreview();
            page.dialogs.elements.modalCreateStaff.modal('show');
        })

        page.dialogs.elements.btnCreateStaff.on('click', function () {
            page.dialogs.commands.doCreate();
        });


        page.commands.handleChangeProvince(page.dialogs.elements.provinceCre, page.dialogs.elements.districtCre, page.dialogs.elements.wardCre);

        page.commands.handleChangeProvince(page.dialogs.elements.provinceUp, page.dialogs.elements.districtUp, page.dialogs.elements.wardUp);

        page.commands.handleChangeDistrict(page.dialogs.elements.districtCre, page.dialogs.elements.wardCre);

        page.commands.handleChangeDistrict(page.dialogs.elements.districtUp, page.dialogs.elements.wardUp);
    }

    page.commands.loadData = () => {
        page.dialogs.commands.getAllStaffs();
        page.loadData.getAllProvinces().then(() => {
            let provinceId = page.dialogs.elements.provinceCre.val();

            page.loadData.getAllDistrictsByProvinceId(provinceId, page.dialogs.elements.districtCre).then(() => {
                let districtId = page.dialogs.elements.districtCre.val();

                page.loadData.getAllWardsByDistrictId(districtId, page.dialogs.elements.wardCre);
            });
        });

    }
    $(() => {
        page.commands.loadData();

        page.initializeControlEvent();
    })

</script>
</body>

</html>
